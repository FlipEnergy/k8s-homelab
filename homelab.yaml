context: homelab
metadata:
  maintainer: Dennis Zhang (dennis.zhang.nrg@gmail.com)
  description: Helmman DSF for homelab K8s
settings:
  kubeContext: homelab
  globalMaxHistory: 1
namespaces:
  concourse:
  cryptofolio:
  freshrss:
  ingress-nginx:
  ihatemoney:
  jellyfin:
  k8s-dashboard:
  kube-ops-view:
  nextcloud:
  owncast:
  paperless:
  postgresql:
  redis:
  restic:
  syncthing:
  vaultwarden:
  wikijs:
  wireguard:
helmRepos:
  bitnami: https://charts.bitnami.com/bitnami
  concourse: https://concourse-charts.storage.googleapis.com/
  ingress-nginx: https://kubernetes.github.io/ingress-nginx
  k8s-at-home: https://k8s-at-home.com/charts/
  k8s-dashboard: https://kubernetes.github.io/dashboard
  nextcloud: https://nextcloud.github.io/helm/
appsTemplates:
  default: &default
    wait: true
apps:
  ###########
  # Ingress #
  ###########
  ingress-nginx:
    !!merge <<: *default
    namespace: ingress-nginx
    enabled: true
    chart: ingress-nginx/ingress-nginx
    version: 4.1.0
    priority: -200
    timeout: 900
    valuesFile: ingress-nginx/ingress-nginx-values.yaml
  ##############
  # Monitoring #
  ##############
  kube-ops-view:
    !!merge <<: *default
    namespace: kube-ops-view
    enabled: true
    chart: k8s-at-home/kube-ops-view
    version: 1.1.3
    priority: -199
    valuesFile: kube-ops-view/kube-ops-view-values.yaml
  k8s-dashboard:
    !!merge <<: *default
    namespace: k8s-dashboard
    enabled: true
    chart: k8s-dashboard/kubernetes-dashboard
    version: 5.4.1
    priority: -199
    valuesFile: k8s-dashboard/k8s-dashboard-values.yaml
    hooks:
      postInstall: &k8s-dash-admin k8s-dashboard/dashboard-admin.yaml
      preUpgrade: *k8s-dash-admin
  #############
  # Databases #
  #############
  postgresql:
    !!merge <<: *default
    namespace: postgresql
    enabled: true
    chart: bitnami/postgresql
    version: 11.1.26
    priority: -100
    valuesFile: postgresql/postgres-values.yaml
    secretsFile: postgresql/secret.postgresql-creds.yaml
    hooks:
      preInstall: &pg-pv postgresql/persistenceVolume.yaml
      preUpgrade: *pg-pv
  redis:
    !!merge <<: *default
    namespace: redis
    enabled: true
    chart: bitnami/redis
    version: 16.8.7
    priority: -100
    valuesFile: redis/redis-values.yaml
  ################
  # Applications #
  ################
  concourse:
    !!merge <<: *default
    namespace: concourse
    group: uses-pg
    enabled: true
    chart: concourse/concourse
    version: 16.1.21
    valuesFile: concourse/concourse-values.yaml
    secretsFile: concourse/secret.concourse-creds.yaml
  cryptofolio:
    !!merge <<: *default
    namespace: cryptofolio
    enabled: true
    chart: k8s-at-home/cryptofolio
    version: 1.3.2
    valuesFile: cryptofolio/cryptofolio-values.yaml
    hooks:
      preInstall: &crypto-pv cryptofolio/persistenceVolume.yaml
      preUpgrade: *crypto-pv
  freshrss:
    !!merge <<: *default
    namespace: freshrss
    enabled: true
    chart: k8s-at-home/freshrss
    version: 6.3.2
    timeout: 360
    valuesFile: freshrss/freshrss-values.yaml
    hooks:
      preInstall: &freshrss-pv freshrss/persistenceVolume.yaml
      preUpgrade: *freshrss-pv
  ihatemoney:
    !!merge <<: *default
    namespace: ihatemoney
    enabled: true
    chart: k8s-at-home/ihatemoney
    version: 1.0.1
    timeout: 360
    valuesFile: ihatemoney/ihatemoney-values.yaml
    secretsFile: ihatemoney/secret.ihatemoney-creds.yaml
    hooks:
      preInstall: &ihatemoney-pv ihatemoney/persistenceVolume.yaml
      preUpgrade: *ihatemoney-pv
  jellyfin:
    !!merge <<: *default
    namespace: jellyfin
    enabled: true
    chart: k8s-at-home/jellyfin
    version: 9.4.2
    valuesFile: jellyfin/jellyfin-values.yaml
    hooks:
      preInstall: &jellyfin-pv jellyfin/persistenceVolumes.yaml
      preUpgrade: *jellyfin-pv
  owncast:
    !!merge <<: *default
    namespace: owncast
    enabled: true
    chart: k8s-at-home/owncast
    version: 3.3.1
    valuesFile: owncast/owncast-values.yaml
    hooks:
      preInstall: &owncast-pv owncast/persistenceVolume.yaml
      preUpgrade: *owncast-pv
  nextcloud:
    !!merge <<: *default
    namespace: nextcloud
    group: uses-pg
    enabled: true
    chart: nextcloud/nextcloud
    version: 2.14.2
    timeout: 900
    priority: -99
    valuesFile: nextcloud/nextcloud-values.yaml
    secretsFile: nextcloud/secret.nextcloud-creds.yaml
    hooks:
      preInstall: &nextcloud-hooks nextcloud/preHooks.yaml
      preUpgrade: *nextcloud-hooks
  paperless:
    !!merge <<: *default
    namespace: paperless
    enabled: true
    chart: k8s-at-home/paperless
    version: 8.8.1
    valuesFile: paperless/paperless-values.yaml
    secretsFile: paperless/secret.paperless-key.yaml
    hooks:
      preInstall: &paperless-pv paperless/persistenceVolumes.yaml
      preUpgrade: *paperless-pv
  syncthing:
    !!merge <<: *default
    namespace: syncthing
    enabled: true
    chart: k8s-at-home/syncthing
    version: 3.4.1
    valuesFile: syncthing/syncthing-values.yaml
    hooks:
      preInstall: syncthing/persistenceVolume.yaml
  vaultwarden:
    !!merge <<: *default
    namespace: vaultwarden
    enabled: true
    chart: k8s-at-home/vaultwarden
    version: 4.2.1
    priority: -99
    valuesFile: vaultwarden/vaultwarden-values.yaml
    secretsFile: vaultwarden/secrets.vaultwarden-creds.yaml
    hooks:
      preInstall: &vaultwarden-pv vaultwarden/persistenceVolume.yaml
      preUpgrade: *vaultwarden-pv
  wikijs:
    !!merge <<: *default
    namespace: wikijs
    group: uses-pg
    enabled: true
    chart: k8s-at-home/wikijs
    version: 6.3.1
    valuesFile: wikijs/wikijs-values.yaml
    secretsFile: wikijs/secret.wikijs-creds.yaml
  wireguard:
    !!merge <<: *default
    namespace: wireguard
    group: uses-pg
    enabled: true
    chart: ./wireguard/chart
    version: 0.4.7
    valuesFile: wireguard/wireguard-values.yaml
    secretsFile: wireguard/secrets.wireguard-creds.yaml
  ##########
  # Backup #
  ##########
  restic:
    !!merge <<: *default
    namespace: restic
    enabled: true
    chart: ./restic/chart
    version: 0.1.0
    secretsFile: restic/secret.restic-creds.yaml
