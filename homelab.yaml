context: homelab

metadata:
  maintainer: Dennis Zhang (dennis.zhang.nrg@gmail.com)
  description: Helmman DSF for homelab K8s

settings:
  globalMaxHistory: 2

namespaces:
  concourse:
  focal:
  freshrss:
  gonic:
  haste:
  influxdb2:
  ingress-nginx:
  kube-ops-view:
  kube-prometheus-stack:
  nfs-subdir-external-provisioner:
  owncast:
  postgresql:
  pretend-youre-xyzzy:
  sharry:
  syncthing:
  vaultwarden:
  whoogle:
  wikijs:
  wireguard:

helmRepos:
  bitnami: https://charts.bitnami.com/bitnami
  concourse: https://concourse-charts.storage.googleapis.com/
  headlamp: https://kinvolk.github.io/headlamp/
  influxdata: https://helm.influxdata.com/
  ingress-nginx: https://kubernetes.github.io/ingress-nginx
  k8s-at-home: https://k8s-at-home.com/charts/
  nfs-subdir-external-provisioner: https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner
  place1: https://place1.github.io/wg-access-server
  prometheus-community: https://prometheus-community.github.io/helm-charts
  stable: https://charts.helm.sh/stable

appsTemplates:
  default: &default
    wait: true

apps:
  # Ingress
  ingress-nginx:
    <<: *default
    namespace: ingress-nginx
    enabled: true
    chart: ingress-nginx/ingress-nginx
    version: 3.34.0
    priority : -200
    valuesFile: ingress-nginx/ingress-nginx-values.yaml

  # Monitoring
  kube-ops-view:
    <<: *default
    namespace: kube-ops-view
    enabled: true
    chart: stable/kube-ops-view
    version: 1.2.4
    valuesFile: kube-ops-view/kube-ops-view-values.yaml
    priority : -199

  headlamp:
    <<: *default
    namespace: kube-system
    enabled: true
    chart: headlamp/headlamp
    version: 0.1.1
    valuesFile: headlamp/headlamp-values.yaml
    priority : -199

  # NFS
  nfs-subdir-external-provisioner:
    <<: *default
    namespace: nfs-subdir-external-provisioner
    enabled: true
    chart: nfs-subdir-external-provisioner/nfs-subdir-external-provisioner
    version: 4.0.13
    valuesFile: nfs-subdir-external-provisioner/nfs-subdir-external-provisioner-values.yaml
    priority : -199

  # Databases
  influxdb2:
    <<: *default
    namespace: influxdb2
    enabled: true
    chart: influxdata/influxdb2
    version: 2.0.1
    valuesFile: influxdb2/influxdb2-values.yaml
    secretsFile: influxdb2/secrets.influxdb2-creds.yaml
    hooks:
      preInstall: influxdb2/persistenceVolume.yaml
    priority : -99

  kube-prometheus-stack:
    <<: *default
    namespace: kube-prometheus-stack
    enabled: true
    chart: prometheus-community/kube-prometheus-stack
    version: 17.1.3
    valuesFile: kube-prometheus/kube-prometheus-values.yaml
    secretsFile: kube-prometheus/secrets.kube-prometheus.yaml
    hooks:
      preInstall: kube-prometheus/persistenceVolume.yaml
    priority: -98
    timeout: 600

  postgresql:
    <<: *default
    namespace: postgresql
    enabled: true
    chart: bitnami/postgresql
    version: 10.9.1
    valuesFile: postgresql/postgres-values.yaml
    secretsFile: postgresql/secret.postgresql-creds.yaml
    hooks:
      preInstall: postgresql/persistenceVolume.yaml
    priority: -97

  # Applications
  concourse:
    <<: *default
    namespace: concourse
    enabled: true
    chart: concourse/concourse
    version: 15.7.0
    valuesFile: concourse/concourse-values.yaml
    secretsFile: concourse/secret.concourse-creds.yaml

  focal:
    <<: *default
    namespace: focal
    enabled: true
    chart: k8s-at-home/focalboard
    version: 3.0.0
    valuesFile: focalboard/focalboard-values.yaml
    secretsFile: focalboard/secret.focalboard-creds.yaml

  freshrss:
    <<: *default
    namespace: freshrss
    enabled: true
    chart: k8s-at-home/freshrss
    version: 6.0.0
    valuesFile: freshrss/freshrss-values.yaml
    hooks:
      preInstall: freshrss/persistenceVolume.yaml
    timeout: 360

  haste:
    <<: *default
    namespace: haste
    enabled: true
    chart: k8s-at-home/haste-server
    version: 3.0.0
    valuesFile: hastebin/hastebin-values.yaml

  gonic:
    <<: *default
    namespace: gonic
    enabled: true
    chart: k8s-at-home/gonic
    version: 6.0.0
    valuesFile: gonic/gonic-values.yaml
    hooks:
      preInstall: gonic/persistenceVolume.yaml

  owncast:
    <<: *default
    namespace: owncast
    enabled: true
    chart: k8s-at-home/owncast
    version: 3.0.0
    valuesFile: owncast/owncast-values.yaml
    hooks:
      preInstall: owncast/persistenceVolume.yaml

  pretend-youre-xyzzy:
    <<: *default
    namespace: pretend-youre-xyzzy
    enabled: false
    chart: k8s-at-home/pretend-youre-xyzzy
    version: 1.0.1
    valuesFile: pretend-youre-xyzzy/pretend-youre-xyzzy-values.yaml

  sharry:
    <<: *default
    namespace: sharry
    enabled: true
    chart: k8s-at-home/sharry
    version: 5.0.0
    valuesFile: sharry/sharry-values.yaml
    secretsFile: sharry/secret.sharry-config.yaml

  syncthing:
    <<: *default
    namespace: syncthing
    enabled: true
    chart: k8s-at-home/syncthing
    version: 3.0.0
    valuesFile: syncthing/syncthing-values.yaml
    hooks:
      preInstall: syncthing/persistenceVolume.yaml

  vaultwarden:
    <<: *default
    namespace: vaultwarden
    enabled: true
    chart: k8s-at-home/vaultwarden
    version: 3.0.0
    valuesFile: vaultwarden/vaultwarden-values.yaml
    secretsFile: vaultwarden/secrets.vaultwarden-creds.yaml
    hooks:
      preInstall: vaultwarden/persistenceVolume.yaml

  whoogle:
    <<: *default
    namespace: whoogle
    enabled: true
    chart: k8s-at-home/whoogle
    version: 3.0.0
    valuesFile: whoogle/whoogle-values.yaml

  wikijs:
    <<: *default
    namespace: wikijs
    enabled: true
    chart: k8s-at-home/wikijs
    version: 6.0.0
    valuesFile: wikijs/wikijs-values.yaml
    secretsFile: wikijs/secret.wikijs-creds.yaml

  wireguard:
    <<: *default
    namespace: wireguard
    enabled: true
    chart: place1/wg-access-server
    version: 0.4.6
    valuesFile: wireguard/wireguard-values.yaml
    secretsFile: wireguard/secrets.wireguard-creds.yaml
