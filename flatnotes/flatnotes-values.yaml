# Override values for flatnotes

image:
  # -- image repository
  repository: dullage/flatnotes
  # -- image tag
  # @default -- chart.appVersion
  tag: v3.1.0
  # -- image pull policy
  pullPolicy: IfNotPresent


# command found here: https://github.com/Dullage/flatnotes/blob/master/entrypoint.sh#L32
command: ["python"]
args:
  - -m
  - uvicorn
  - main:app
  - --app-dir
  - flatnotes
  - --host
  - "0.0.0.0"
  - --port
  - "8080"

securityContext:
  runAsUser: 1000
  runAsNonRoot: true

service:
  main:
    ports:
      http:
        port: 8080

ingress:
  main:
    enabled: true
    annotations:
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      nginx.ingress.kubernetes.io/proxy-body-size: 100m
    hosts:
      - host: notes.pleasenoddos.com
        paths:
          - path: /

persistence:
  data:
    enabled: true
    mountPath: /data
    accessMode: ReadWriteOnce
    # Persistent Volume Storage Clas
    storageClass: flatnotes-data
    size: 500Mi
    # Do not delete the pvc upon helm uninstall
    retain: true

resources:
  limits:
    memory: 200Mi
  requests:
    cpu: 15m
    memory: 100Mi

nodeSelector:
  kubernetes.io/arch: amd64
  performance: medium
